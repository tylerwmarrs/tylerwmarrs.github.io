<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Naming A Baby Part 2 | Tyler Marrs</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../rss.xml">
<link rel="canonical" href="http://tylermarrs.com/posts/naming-a-baby-part-2/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-140537127-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-140537127-1');
</script><link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../../assets/css/theme.css">
<link rel="stylesheet" media="screen" href="http://openfontlibrary.org/face/railway-sans" type="text/css">
<link rel="apple-touch-icon" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="manifest" href="../../site.webmanifest">
<link rel="mask-icon" href="../../safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
<meta name="author" content="Tyler Marrs">
<link rel="prev" href="../mass-ts-robot-dog-example/" title="MASS (Mueen's Algorithm for Similarity Search) - Robot Dog Example" type="text/html">
<link rel="next" href="../matrix-profile-tldr/" title="Matrix Profile TL;DR" type="text/html">
<meta property="og:site_name" content="Tyler Marrs">
<meta property="og:title" content="Naming A Baby Part 2">
<meta property="og:url" content="http://tylermarrs.com/posts/naming-a-baby-part-2/">
<meta property="og:description" content="Introduction¶In part 1 of this series, I introduced a personal conundrum, how can I simplify naming a baby? In this blog post I will discuss how I created clusters of names based on features and sampl">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2019-05-31T00:00:00-05:00">
<meta property="article:tag" content="clustering">
<meta property="article:tag" content="feature engineering">
<meta property="article:tag" content="sampling">
<meta property="article:tag" content="statistics">
<meta property="article:tag" content="stratification">
</head>
<body>
<!-- Menubar -->

<nav class="navbar navbar-inverse center" role="navigation"><div class="container">
    <div align="center">
      <img id="logo" src="../../images/me.jpg"><div id="blog-title">Tyler Marrs</div>
      <div id="blog-description">Yet another data scientist's blog.</div>
    </div>

    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
    </div>
    <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
<li>
<a href="../../pages/about/">About</a>
                </li>
<li>
<a href="../../">Blog</a>
                </li>
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>
                </li>
<li>
<a href="../../pages/projects/">Projects</a>
                </li>
<li>
<a href="../../rss.xml">RSS feed</a>

        </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<!--Add Links to social media sites --><!-- pass -->
</ul>
</div>
<!-- /.navbar-collapse -->
    </div>
</nav><!-- End of Menubar --><div class="container">
  <!--Body content-->
  <div class="row">
      
      
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Naming A Baby Part 2</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Tyler Marrs
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2019-05-31T00:00:00-05:00" itemprop="datePublished" title="2019-05-31">2019-05-31</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Introduction">Introduction<a class="anchor-link" href="#Introduction">¶</a>
</h2>
<p>In <a href="http://tylermarrs.com/posts/naming-a-baby-part-1/">part 1</a> of this series, I introduced a personal conundrum, how can I simplify naming a baby? In this blog post I will discuss how I created clusters of names based on features and sampled them using statistical methods. You do not need a heavy background in statistics or machine learning to follow along.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Choosing-Features">Choosing Features<a class="anchor-link" href="#Choosing-Features">¶</a>
</h2>
<p>In order to perform clustering, I needed to identify common traits within names that people consider. When you really start thinking about what you like in a name, it becomes apparent that there is much to consider. Here is a list of features that I derived from names:</p>
<p>Sample name <strong>Garen</strong>.</p>
<p><strong>1. Percentage of males in the population with this name - 100%</strong></p>
<p>The database of names gives the frequency of individuals with the name since 1880 by both male and female. I simplified it and combined all years into one value. Using the name Garen as an example, you can see that there hasn't been a female with that name on record.</p>
<p><strong>2. Percentage of females in the population with this name - 0%</strong></p>
<p>I used the same logic to compute the percentage of females. Garen was never recorded as a female given name.</p>
<p><strong>3. Percentage of the population with the name</strong></p>
<p>Here I combined the male and female frequency into one value to obtain the popularity of the name.</p>
<p><strong>4. First letter - G</strong><br><strong>5. First two letters - Ga</strong><br><strong>6. First three letters - Gar</strong><br><strong>7. Last letter - n</strong><br><strong>8. Last two letters - en</strong><br><strong>9. Last three letters - ren</strong></p>
<p>The beginning and ending letters of a name is pretty easy to obtain by simple string slicing.</p>
<p><strong>10. How to pronounce the name - KRN</strong></p>
<p>I use metaphone to generate this information. It generates a string that creates a sound value. Similar to the name Garen, Karen sounds similar and has the same code of KRN.</p>
<p><strong>11. Number of letters in the name - 5</strong></p>
<p>Here I simply count the number of letters in the name.</p>
<h3 id="Putting-It-All-Together">Putting It All Together<a class="anchor-link" href="#Putting-It-All-Together">¶</a>
</h3>
<p>Using the same sample name, Garen, here is what all of the features would look like that is fed into the clustering algorithm.</p>
<div style="float:left">
<table>
<thead><tr>
<th>Feature</th>
            <th>Value</th>
        </tr></thead>
<tbody>
<tr>
<td>% Male</td>
<td>1</td>
</tr>
<tr>
<td>% Female</td>
<td>0</td>
</tr>
<tr>
<td>% Population</td>
<td>0.000232</td>
</tr>
<tr>
<td>First letter</td>
<td>g</td>
</tr>
<tr>
<td>First two letters</td>
<td>ga</td>
</tr>
<tr>
<td>First three letters</td>
<td>gar</td>
</tr>
<tr>
<td>Last letter</td>
<td>n</td>
</tr>
<tr>
<td>Last two letters</td>
<td>en</td>
</tr>
<tr>
<td>Last three letters</td>
<td>ren</td>
</tr>
<tr>
<td>Metaphone</td>
<td>krn</td>
</tr>
<tr>
<td>Length</td>
<td>5</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Clustering-Similar-Names">Clustering Similar Names<a class="anchor-link" href="#Clustering-Similar-Names">¶</a>
</h2>
<p>For clustering, I used the <a href="https://scikit-learn.org/stable/modules/neighbors.html">NearestNeighbors algorithm from scikit-learn</a>. It provides a supervised and unsupervised approach to clustering. In this case, for baby name recommendation, I set the minimum number of neighbors to 20 and used the automatic algorithm. Once clustering was finished I created a dictionary of similar names.</p>
<p>For example, looking up names similar to Ladon would give us:</p>
<div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">'Ladell'</span><span class="p">,</span>
 <span class="s1">'Lacy'</span><span class="p">,</span>
 <span class="s1">'Little'</span><span class="p">,</span>
 <span class="s1">'Lorenza'</span><span class="p">,</span>
 <span class="s1">'Lorren'</span><span class="p">,</span>
 <span class="s1">'Mikell'</span><span class="p">,</span>
 <span class="s1">'Mikal'</span><span class="p">,</span>
 <span class="s1">'Laren'</span><span class="p">,</span>
 <span class="s1">'Lorin'</span><span class="p">,</span>
 <span class="s1">'Laray'</span><span class="p">,</span>
 <span class="s1">'Mika'</span><span class="p">,</span>
 <span class="s1">'Loren'</span><span class="p">,</span>
 <span class="s1">'Larrie'</span><span class="p">,</span>
 <span class="s1">'Loran'</span><span class="p">,</span>
 <span class="s1">'Lindsey'</span><span class="p">,</span>
 <span class="s1">'Lindsay'</span><span class="p">,</span>
 <span class="s1">'Micah'</span><span class="p">,</span>
 <span class="s1">'Micky'</span><span class="p">,</span>
 <span class="s1">'Lester'</span><span class="p">,</span>
 <span class="s1">'Mica'</span><span class="p">]</span>
</pre></div>
<p>I use the similar names to recommend a name that you may like based on previous likes. The similar names were stored in a Python pickle file and loaded for suggestions while the features of all of the names were stored in a database. The database essentially keeps track of what you like and dislike. This leads us to the more complicated part of the application; sampling.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Sampling-and-Suggesting-Names">Sampling and Suggesting Names<a class="anchor-link" href="#Sampling-and-Suggesting-Names">¶</a>
</h2>
<p><img src="../../images/baby_name_stratified_sampling.png" alt="alt text" title="Stratified Sampling"></p>
<p>For sampling, I came up with three strata (groups) with biased weights. These weights are used to compute which group should be sampled from. The weights are multiplied by the number of names that have been liked with a hard cut-off of 10 for the partner and user strata. So if you liked 10 names, the liklihood that it would select a name similar to one that was liked is (liked / total names) <em> user_bias; (10 / 10,832) </em> 0.45. The weights were all calculated this way and normalized from 0 to 1. Once a strata is chosen, I simply selected a name from the cluster group.</p>
<p>To reduce the number of times that you see a name when you dislike it, I added a hard cut-off of two. Essentially, if you did not like a name two or more times, it will never be shown again. This added some necessary logic to check the name that was sampled prior to displaying it. The logic is as follows:</p>
<ol>
<li>Compute the biased weights to choose which strata to sample from.</li>
<li>Sample a name from the given strata.</li>
<li>If the name is disliked two times or more, repeat steps 1 through 3.</li>
</ol>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Summary">Summary<a class="anchor-link" href="#Summary">¶</a>
</h2>
<p>In this post, I illustrated how I created features that were used to cluster names into similar groups. I further illustrated how I used a biased stratified sampling approach to choose a name to show to the user. In the next part of this series I will show you the application and make it freely available.</p>

</div>
</div>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/clustering/" rel="tag">clustering</a></li>
            <li><a class="tag p-category" href="../../categories/feature-engineering/" rel="tag">feature engineering</a></li>
            <li><a class="tag p-category" href="../../categories/sampling/" rel="tag">sampling</a></li>
            <li><a class="tag p-category" href="../../categories/statistics/" rel="tag">statistics</a></li>
            <li><a class="tag p-category" href="../../categories/stratification/" rel="tag">stratification</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../mass-ts-robot-dog-example/" rel="prev" title="MASS (Mueen's Algorithm for Similarity Search) - Robot Dog Example">Previous post</a>
            </li>
            <li class="next">
                <a href="../matrix-profile-tldr/" rel="next" title="Matrix Profile TL;DR">Next post</a>
            </li>
        </ul></nav></aside><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-3lJUsx1TJHt7BA4udB5KPnDrlkO8T6J6v/op7ui0BbCjvZ9WqV4Xm6DTP6kQ/iBH" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$latex ','$'], ['\\(','\\)']]}});
        </script></article>
</div>
<!--End of body content-->
</div>
<div class="footerbox">
  Contents © 2020 Tyler Marrs
  
</div>

            <script src="../../assets/js/all-nocdn.js"></script><!-- Add Jumbotron scroll js --><script type="text/javascript">//<![CDATA[
$(window).load(function(){
  $(window).scroll(function() {
    var scrolledY = $(window).scrollTop();
    $('.jumbotron').css('background-position', 'left ' + ((scrolledY)) + 'px');
  });
});//]]>
</script><!-- fancy dates --><script>
moment.locale("en");
fancydates(0, "YYYY-MM-DD");
</script><!-- end fancy dates --><script>
baguetteBox.run('div#content', {
    ignoreClass: 'islink',
    captions: function(element) {
        return element.getElementsByTagName('img')[0].alt;
}});
</script><!-- Abstract hide/show
<script src"/assets/js/div_toggle.js"></script>
--><script type="text/javascript">
function toggle(showHideDiv, switchTextDiv) {
    var ele = document.getElementById(showHideDiv);
    var text = document.getElementById(switchTextDiv);
    if(ele.style.display == "none") {
        ele.style.display = "block";
        text.innerHTML = "[hide abstract]";
    }
    else {
            ele.style.display = "none";
            text.innerHTML = "[show abstract]";
    }
}
</script>
</body>
</html>
